# HTTP&HTTPS

> **参考**
>
> [《HTTP》【来源：MDN】](https://developer.mozilla.org/zh-CN/docs/Web/HTTP)
>
> [《HTTP 和 HTTPS 协议，看一篇就够了》(作者：会飞的狗~)【来源：CSDN】](https://blog.csdn.net/xiaoming100001/article/details/81109617)
>
> [《十分钟搞懂 HTTP 和 HTTPS 协议？》(作者：程序员吾非同)【来源：知乎】](https://zhuanlan.zhihu.com/p/72616216)

[TOC]

## HTTP

> 超文本传输协议。
> 是一个基于请求与响应，无状态的，应用层的协议，常基于 `TCP/IP` 协议传输数据，互联网上应用最为广泛的一种网络协议，所有的 WWW 文件都必须遵守这个标准。
> 设计 HTTP 的初衷是为了提供一种发布和接收 HTML 页面的方法。

### HTTP 特点

#### 无状态

- 协议对客户端没有状态存储，对事物处理没有“记忆”能力，比如访问一个网站需要反复进行登录操作
  - 针对无状态的一些解决策略：
    1. 通过 `Cookie/Session` 技术
    2. HTTP/1.1 持久连接（HTTP keep-alive）方法，只要任意一端没有明确提出断开连接，则保持 TCP 连接状态，在请求首部字段中的 `Connection: keep-alive` 即为表明使用了持久连接

#### 无连接

- HTTP/1.1 之前，由于无状态特点，每次请求需要通过 **TCP 三次握手四次挥手**，和服务器重新建立连接。
  - 比如某个客户机在短时间多次请求同一个资源，服务器并不能区别是否已经响应过用户的请求，所以每次需要重新响应请求，需要耗费不必要的时间和流量。

#### 基于请求和响应

基本的特性，由客户端发起请求，服务端响应

#### 简单快速、灵活

#### 通信使用明文

请求和响应不会对通信方进行确认、无法保护数据的完整性

## HTTPS

> HTTPS 是一种通过计算机网络进行安全通信的传输协议，经由 HTTP 进行通信，利用 `SSL/TLS` 建立全信道，加密数据包。
>
> HTTPS 使用的主要目的是提供对网站服务器的身份认证，同时保护交换数据的隐私与完整性。
>
> _《图解 HTTP》这本书中曾提过 HTTPS 是身披 SSL 外壳的 HTTP。_

### HTTPS 特点

#### 内容加密

#### 采用混合加密技术，中间者无法直接查看明文内容

#### 验证身份

通过证书认证客户端访问的是自己的服务器

#### 保护数据完整性

防止传输的内容被中间人冒充或者篡改

> **混合加密**：结合*非对称加密*和*对称加密*技术。
> 客户端使用对称加密生成密钥对传输数据进行加密，然后使用非对称加密的公钥再对秘钥进行加密，所以网络上传输的数据是被秘钥加密的密文和用公钥加密后的秘密秘钥，因此即使被黑客截取，由于没有私钥，无法获取到加密明文的秘钥，便无法获取到明文数据。
>
> 非对称加密过程需要用到公钥进行加密，那么公钥从何而来？
> 其实公钥就被包含在数字证书中，数字证书通常来说是由受信任的数字证书颁发机构 CA，在验证服务器身份后颁发，证书中包含了一个密钥对（公钥和私钥）和所有者识别信息。数字证书被放到服务端，具有服务器身份验证和数据传输加密功能。

### HTTPS 缺点

- HTTPS 协议多次握手，导致页面的加载时间延长近 50%；
- HTTPS 连接缓存不如 HTTP 高效，会增加数据开销和功耗；
- 申请 SSL 证书需要钱，功能越强大的证书费用越高。
- SSL 涉及到的安全算法会消耗 CPU 资源，对服务器资源消耗较大。

### SSL

> SSL（Secure Socket Layer，安全套接字层）：1994 年为 Netscape 所研发，SSL 协议位于 TCP/IP 协议与各种应用层协议之间，为数据通讯提供安全支持。

### TLS

> TLS（Transport Layer Security，传输层安全）：其前身是 SSL，它最初的几个版本（SSL 1.0、SSL 2.0、SSL 3.0）由网景公司开发，1999 年从 3.1 开始被 IETF 标准化并改名，发展至今已经有 TLS 1.0、TLS 1.1、TLS 1.2 三个版本。SSL3.0 和 TLS1.0 由于存在安全漏洞，已经很少被使用到。TLS 1.3 改动会比较大，目前还在草案阶段，目前使用最广泛的是 TLS 1.1、TLS 1.2。

## HTTPS 和 HTTP 的区别

1. HTTPS 是 HTTP 协议的安全版本，HTTP 协议的数据传输是明文的，是不安全的，HTTPS 使用了 SSL/TLS 协议进行了加密处理。
2. http 和 https 使用连接方式不同，默认端口也不一样，http 是 80，https 是 443。
